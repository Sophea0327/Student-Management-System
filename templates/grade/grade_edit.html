{% extends "layout.html" %}
{% block title %}Edit Grade{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">✏️ Edit Grade</h4>
    </div>
    <div class="card-body">
      <!-- FIXED: Corrected blueprint endpoint -->
      <form method="POST" action="{{ url_for('grade.edit_grade', id=grade.id) }}">
        
        <!-- Student Name -->
        <div class="mb-3">
          <label for="student" class="form-label">Student</label>
          <input 
            type="text" 
            id="student" 
            class="form-control" 
            value="{{ grade.student_name }}" 
            readonly>
        </div>

        <!-- Subject Name -->
        <div class="mb-3">
          <label for="subject" class="form-label">Subject</label>
          <input 
            type="text" 
            id="subject" 
            class="form-control" 
            value="{{ grade.subject_name }}" 
            readonly>
        </div>

        <!-- Score -->
        <div class="mb-3">
          <label for="score" class="form-label">Score</label>
          <input 
            type="number" 
            id="score" 
            name="score" 
            class="form-control" 
            value="{{ grade.score }}" 
            min="0" 
            max="100" 
            step="0.01" 
            required>
        </div>

        <!-- Grade Letter -->
        <div class="mb-3">
          <label for="grade_letter" class="form-label">Grade Letter</label>
          <input 
            type="text" 
            id="grade_letter" 
            name="grade_letter" 
            class="form-control" 
            value="{{ grade.grade_letter }}" 
            maxlength="2" 
            required>
        </div>

        <!-- Remarks -->
        <div class="mb-3">
          <label for="remarks" class="form-label">Remarks</label>
          <textarea 
            id="remarks" 
            name="remarks" 
            class="form-control" 
            rows="2"
            placeholder="Enter remarks about the student’s performance">{{ grade.remarks or '' }}</textarea>
        </div>

        <!-- Actions -->
        <div class="d-flex justify-content-between mt-4">
          <!-- FIXED: Corrected endpoint for list page -->
          <a href="{{ url_for('grade.list_grades') }}" class="btn btn-secondary">
            ← Back
          </a>
          <button type="submit" class="btn btn-success">
            💾 Save Changes
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
{% endblock %}
